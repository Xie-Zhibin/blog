<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>MySQL.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/assets/css/article.css">
</head>
<body class="markdown haroopad">
<h1 id="mysql笔记"><a name="mysql笔记" href="#mysql笔记"></a>MySQL笔记</h1><blockquote>
<p>使用MySQL数据库也有一阵子时间了，因为不是DBA，所有也很少去研究高级的问题，只停留在增删查改和编写存储过程及MySQL函数等一些基础操作上，现在把目前遇到的自觉为比较重要的知识记下来，同时方便自己以后查阅回忆。</p>
</blockquote><hr class="page"><h2 id="1.表连接"><a name="1.表连接" href="#1.表连接"></a>1.表连接</h2><p>通常需要同时获取多个表中的字段，可以用表连接实现。<br>表连接分 内连接 和 外连接 两种</p><ul>
<li>内连接：仅选出两张表中相互匹配的记录，不匹配的则不出现。</li><li>外连接：<br>  外连接又分左连接和右连接。<ul>
<li>左连接：包含所有的左边表中的记录甚至是右边表中没有和它匹配的记录。(left join TABLE on …)</li><li>右接接：包含所有的右边表中的记录甚至是左边表中没有和它匹配的记录。(right join TABLE on …)</li><li>左右连接类似，二者可以相互转化。</li></ul>
</li></ul><p>因此基于某些方面的考虑，我尽量使用外连接，因为如果使用内连接，有时可能因为某张数据表的某个字段尚未完善，导致无法查到整条记录。</p><hr class="page"><h2 id="2.存储过程与函数"><a name="2.存储过程与函数" href="#2.存储过程与函数"></a>2.存储过程与函数</h2><p>可以将一些复杂且常用的查询写成存储过程或函数，以简化开发者的工作，同时减少数据在数据库和应用服务器之间的传输。<br>存储过程于函数的区别在于函数必须有返回值，而存储过程没有，存储过程的参数可以使用IN, OUT, INOUT类型，而函数只能是IN类型。</p><ul>
<li><p>存储过程</p>
<ul>
<li>创建：create procedure sp_name([pro_parmeter[,..]])<br>  [characteristic ..] routine_body; </li><li>调用： call sp_name([parameter[,..]])</li><li>查看：show procedure status, show create procedure sp_name\G</li></ul>
</li><li><p>函数</p>
<ul>
<li>创建：create function sp_name([func_parameter[,…])<br> returns type<br> [characteristic …] routine_body</li><li>调用： select sp_name([parameter[,..]])</li><li>查看：show function status, show create function sp_name\G</li></ul>
</li></ul><p>routine_body是SQL代码的内容，可以用BEGIN…END来表示SQL代码的开始和结束。</p><hr class="page"><h2 id="3.其他"><a name="3.其他" href="#3.其他"></a>3.其他</h2><ul>
<li>delimiter命令修改语句的结束符号</li><li>变量<ul>
<li>定义：declare var_name[,…] type [default value]</li><li>赋值：<br>1.直接赋值：set var_name = expr[, var_name =  expr]…<br>2.也可以通过查询将结果赋值给变量，这要求查询返回的结果必须只有一行：select col_name[,…] into var_name[,…] table_expr;</li></ul>
</li><li>流程控制：<ul>
<li>if语句：<pre><code data-origin="<pre><code>if search_condition then statement_list
  [else if search_condition  then statement_list]
  [else statement_list]
end if
</code></pre>">if search_condition then statement_list
  [else if search_condition  then statement_list]
  [else statement_list]
end if
</code></pre></li><li>case 语句<pre><code data-origin="<pre><code>case case_value 
  when when_value then statement_list
  [when when_value then statement_list]...
  [else statement_list]
end case
</code></pre>">case case_value 
  when when_value then statement_list
  [when when_value then statement_list]...
  [else statement_list]
end case
</code></pre>或者<pre><code data-origin="<pre><code>case
  when search_condition then statement_list
  [when search_condition then statement_list]...
  [else statement_list]
end case
</code></pre>">case
  when search_condition then statement_list
  [when search_condition then statement_list]...
  [else statement_list]
end case
</code></pre></li></ul>
</li></ul><h4 id="----------------不定期添加新内容------------------"><a name="----------------不定期添加新内容------------------" href="#----------------不定期添加新内容------------------"></a>————————不定期添加新内容—————————</h4>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
