<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>thinking_in_C.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/assets/css/article.css">
  </head>
<body class="markdown haroopad">
<h1 id="thinking-in-c"><a name="thinking-in-c" href="#thinking-in-c"></a>Thinking in C</h1><blockquote>
<p>为了更好地学习数据结构和算法，花了几天时间复习了一遍C语言。把原来没有理解透彻的和已经快要忘记的一些知识点记录下来，作为复习的总结，也方便以后参考。</p>
</blockquote><hr class="page"><h2 id="a.指针"><a name="a.指针" href="#a.指针"></a>A.指针</h2><blockquote>
<p>指针是一个其数值为地址的变量(或数据对象)。指针是一种数据类型，可以进行相应的指针运算。<br>当创建一个指针时，系统只分配了用来存储指针本身的内存空间，并不分配用来存储数据的内存空间。因此在使用指针之前，必须给它赋予一个已分配的内存地址。未经初始化的指针由于其指向不确定，会带来很多潜在的错误。</p>
</blockquote><hr class="page"><h2 id="b.数组与指针"><a name="b.数组与指针" href="#b.数组与指针"></a>B.数组与指针</h2><blockquote>
<p>数组名同时也是该数组首元素的地址。即，<code>array == &amp;array[0]</code>。<br>对于数组的访问可以由指向数组的指针代替， <code>*(arr + i) == arr[i]</code><br>对指针加1,不是使指针增加一个字节，而是等价于对指针的值加上它指向的对象的字节大小，即让指针指向下一个元素。</p>
</blockquote><hr class="page"><h2 id="c.函数与指针"><a name="c.函数与指针" href="#c.函数与指针"></a>C.函数与指针</h2><blockquote>
<p>使用指针作为函数的指针可以使函数操作各种复杂的数据结构。<br>指针也可以指向函数。一个函数指针可以作为另一个函数的参数。<br><code>void (* pf)(char *);</code> 表示pf是一个指向一个以字符指针为参数，无返回值的函数。<code>(* pf)</code>即为指向的函数。<br>在ANSI C中将两种调用指针指向的函数的方式视为等价，即<code>(* pf)()</code>与 <code>pf()</code>等价</p>
</blockquote><hr class="page"><h2 id="d.内存管理"><a name="d.内存管理" href="#d.内存管理"></a>D.内存管理</h2><blockquote>
<p>C中，可以用malloc() 和 free() 分别进行动态内存分配和释放内存。<br>I.分配内存<br>在用malloc() 函数动态分配内存时，malloc()接受一个参数：所需内存字节数。然后malloc() 寻找可用内存中一个大小适合的块，分配成功，返回那块内存的第一个字节的地址，分配失败，返回NULL<br>malloc()返回一个指向void的指针，这是ANSI C标准的一个新类型，这一类型被用作“通用指针”，因此一般需要把返回值指派为适当的类型。<br>如下代码请求30个double类型值的空间。</p>
<pre><code data-origin="<pre><code>double * ptd;
ptd = (double *) malloc(30 * sizeof (double));
</code></pre>">double * ptd;
ptd = (double *) malloc(30 * sizeof (double));
</code></pre><p>注：sizeof是一个运算符，不是一个函数。它的操作数可以时一个具体的数据对象(如一个变量名)，或者一个类型。如果是一个类型，操作数必须放在括号中。sizeof返回size_t类型的值，它是一个无符号整数类型，但不是一个新类型。C99中把%zd作为用来显示size_t类型值的printf()说明符，也可以使用%u, %lu代替.</p>
<hr class="section">
<p>II.回收内存<br>由于C不具备如Java等其他语言的自动垃圾回收功能，适时释放分配的内存空间就变得及其重要，否则容易导致内存泄漏。<br>在编译程序时，静态变量的数量是固定的，在程序运行时也是不改变的。自动变量使用的内存数量在程序执行时自动增加或减少。但被分配的内存所使用的内存数量只会增加，除非记得使用free()</p>
</blockquote><hr class="page">

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
